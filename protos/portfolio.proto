syntax = "proto3";

package portfolio;

message Asset {
  string id = 1;
  string symbol = 2;
  string name = 3;
  double quantity = 4;
  double current_price = 5;
  double change_percent = 6;
  double weight = 7;
}

message PortfolioOverview {
  repeated Asset assets = 1;
  double total_value = 2;
  double daily_change_percent = 3;
}

message TimeSeriesPoint {
  int64 timestamp_ms = 1;
  double value = 2;
}

message PortfolioTimeSeriesResponse {
  repeated TimeSeriesPoint points = 1;
}

message Empty {}

message HealthCheckResponse {
  string status = 1;
}

service PortfolioService {
  // unary – snapshot
  rpc GetOverview(Empty) returns (PortfolioOverview);
  rpc GetTimeSeries(Empty) returns (PortfolioTimeSeriesResponse);

  // streaming – live feed
  rpc StreamOverview(Empty) returns (stream PortfolioOverview);

  rpc HealthCheck(Empty) returns (HealthCheckResponse);
}
